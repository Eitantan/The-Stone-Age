const SCENE = document.querySelector('a-scene');
const CAMERA = document.querySelector('[camera]');
let box, random, campossplit, min, max, allText;
let y = -1;
let speed = 1;
let modObj = {
	"scene": SCENE,
	"camera": CAMERA
}
let save = "";

function init() {
	CAMERA.y += 2;
}

function makechunk(sx, sy, sz) {
	for (var x = 0; x < 16; x++) {
		for (var z = 0; z < 16; z++) {
			box = document.createElement('a-box');
			box.setAttribute("position", {
				x: sx+x-16,
				y: sy+y,
				z: sz+z-16
			})
			box.setAttribute("material", {
				color: "green"
			})
			box.class = "collidable"
			box.id = `box/${x}:${z}`
			save += `0:${Math.round(sx+x-16)},${Math.round(sy+y)},${Math.round(sz+z-16)};`
			SCENE.appendChild(box)
			
			random = Math.random() * 10;
	
			if (random <= 2) {
				y -= .1;
			} else if (random <= 4) {
				y -= .2;
			} else if (random <= 6) {
				y += .2;
			} else if (random <= 8) {
				y += .1;
			}
		}	
	}
	document.querySelector('#save').innerText = save;

}

function loadchunk(chunk) {
	chunk.split(';').forEach((l)=>{
		var x, y, z;
		x = Number(l.split(':')[1].split(',')[0]);
		y = Number(l.split(':')[1].split(',')[1]);
		z = Number(l.split(':')[1].split(',')[2]);
		
		box = document.createElement('a-box');
		box.setAttribute("position", {
			x: x,
			y: y,
			z: z
		})

		// should depend on block type
		box.setAttribute("material", {
			color: "green"
		})
		box.class = "collidable"
		box.id = `box/${x}:${z}`
		SCENE.appendChild(box)
	})
}

function cameraControls() {
	document.addEventListener("keypress", (e)=>{
		if (e.code == "Space") {
			CAMERA.getAttribute('position').y += .55 * speed;
		}
	})
	document.addEventListener("keydown", (e)=>{
		if (e.key == "Shift") {
			CAMERA.getAttribute('position').y -= .55 * speed;
		}
	})
}

init();
cameraControls();
// makechunk(0, 0, 0);
// document.getElementById("save").innerText = save;
loadChunk("0:-16,-1,-16;0:-16,-1,-15;0:-16,-1,-14;0:-16,-1,-13;0:-16,-1,-12;0:-16,-1,-11;0:-16,-1,-10;0:-16,-1,-9;0:-16,-1,-8;0:-16,-1,-7;0:-16,-1,-6;0:-16,-1,-5;0:-16,-1,-4;0:-16,0,-3;0:-16,-1,-2;0:-16,0,-1;0:-15,0,-16;0:-15,0,-15;0:-15,0,-14;0:-15,0,-13;0:-15,0,-12;0:-15,0,-11;0:-15,0,-10;0:-15,0,-9;0:-15,0,-8;0:-15,-1,-7;0:-15,-1,-6;0:-15,0,-5;0:-15,0,-4;0:-15,0,-3;0:-15,-1,-2;0:-15,-1,-1;0:-14,0,-16;0:-14,-1,-15;0:-14,0,-14;0:-14,-1,-13;0:-14,0,-12;0:-14,0,-11;0:-14,0,-10;0:-14,0,-9;0:-14,-1,-8;0:-14,-1,-7;0:-14,-1,-6;0:-14,-1,-5;0:-14,-1,-4;0:-14,-1,-3;0:-14,-1,-2;0:-14,-1,-1;0:-13,-2,-16;0:-13,-2,-15;0:-13,-2,-14;0:-13,-2,-13;0:-13,-2,-12;0:-13,-1,-11;0:-13,-1,-10;0:-13,-1,-9;0:-13,-1,-8;0:-13,-1,-7;0:-13,-1,-6;0:-13,-2,-5;0:-13,-2,-4;0:-13,-2,-3;0:-13,-2,-2;0:-13,-2,-1;0:-12,-2,-16;0:-12,-2,-15;0:-12,-3,-14;0:-12,-2,-13;0:-12,-3,-12;0:-12,-2,-11;0:-12,-2,-10;0:-12,-2,-9;0:-12,-2,-8;0:-12,-2,-7;0:-12,-2,-6;0:-12,-2,-5;0:-12,-2,-4;0:-12,-2,-3;0:-12,-2,-2;0:-12,-2,-1;0:-11,-2,-16;0:-11,-2,-15;0:-11,-2,-14;0:-11,-2,-13;0:-11,-2,-12;0:-11,-2,-11;0:-11,-2,-10;0:-11,-2,-9;0:-11,-2,-8;0:-11,-2,-7;0:-11,-2,-6;0:-11,-2,-5;0:-11,-2,-4;0:-11,-2,-3;0:-11,-2,-2;0:-11,-2,-1;0:-10,-2,-16;0:-10,-2,-15;0:-10,-2,-14;0:-10,-2,-13;0:-10,-2,-12;0:-10,-2,-11;0:-10,-2,-10;0:-10,-2,-9;0:-10,-2,-8;0:-10,-2,-7;0:-10,-2,-6;0:-10,-3,-5;0:-10,-2,-4;0:-10,-3,-3;0:-10,-2,-2;0:-10,-2,-1;0:-9,-2,-16;0:-9,-2,-15;0:-9,-3,-14;0:-9,-3,-13;0:-9,-3,-12;0:-9,-3,-11;0:-9,-3,-10;0:-9,-3,-9;0:-9,-3,-8;0:-9,-2,-7;0:-9,-2,-6;0:-9,-2,-5;0:-9,-2,-4;0:-9,-2,-3;0:-9,-2,-2;0:-9,-2,-1;0:-8,-2,-16;0:-8,-2,-15;0:-8,-2,-14;0:-8,-2,-13;0:-8,-2,-12;0:-8,-2,-11;0:-8,-2,-10;0:-8,-2,-9;0:-8,-2,-8;0:-8,-2,-7;0:-8,-2,-6;0:-8,-2,-5;0:-8,-2,-4;0:-8,-2,-3;0:-8,-2,-2;0:-8,-2,-1;0:-7,-2,-16;0:-7,-2,-15;0:-7,-2,-14;0:-7,-2,-13;0:-7,-2,-12;0:-7,-2,-11;0:-7,-2,-10;0:-7,-2,-9;0:-7,-1,-8;0:-7,-2,-7;0:-7,-1,-6;0:-7,-1,-5;0:-7,-1,-4;0:-7,-1,-3;0:-7,-2,-2;0:-7,-1,-1;0:-6,-1,-16;0:-6,-1,-15;0:-6,-1,-14;0:-6,-1,-13;0:-6,-1,-12;0:-6,-1,-11;0:-6,-1,-10;0:-6,-1,-9;0:-6,-1,-8;0:-6,-1,-7;0:-6,-1,-6;0:-6,-1,-5;0:-6,-1,-4;0:-6,-1,-3;0:-6,-1,-2;0:-6,-1,-1;0:-5,-1,-16;0:-5,-1,-15;0:-5,-1,-14;0:-5,-1,-13;0:-5,-1,-12;0:-5,-1,-11;0:-5,-1,-10;0:-5,-1,-9;0:-5,-1,-8;0:-5,-2,-7;0:-5,-2,-6;0:-5,-1,-5;0:-5,-2,-4;0:-5,-2,-3;0:-5,-2,-2;0:-5,-1,-1;0:-4,-1,-16;0:-4,-1,-15;0:-4,-2,-14;0:-4,-1,-13;0:-4,-1,-12;0:-4,-1,-11;0:-4,-2,-10;0:-4,-1,-9;0:-4,-1,-8;0:-4,-1,-7;0:-4,-1,-6;0:-4,-1,-5;0:-4,-1,-4;0:-4,-1,-3;0:-4,0,-2;0:-4,0,-1;0:-3,0,-16;0:-3,0,-15;0:-3,0,-14;0:-3,0,-13;0:-3,0,-12;0:-3,0,-11;0:-3,0,-10;0:-3,1,-9;0:-3,1,-8;0:-3,1,-7;0:-3,1,-6;0:-3,1,-5;0:-3,1,-4;0:-3,1,-3;0:-3,1,-2;0:-3,1,-1;0:-2,1,-16;0:-2,1,-15;0:-2,0,-14;0:-2,1,-13;0:-2,0,-12;0:-2,1,-11;0:-2,0,-10;0:-2,0,-9;0:-2,0,-8;0:-2,0,-7;0:-2,0,-6;0:-2,0,-5;0:-2,0,-4;0:-2,0,-3;0:-2,0,-2;0:-2,0,-1;0:-1,0,-16;0:-1,0,-15;0:-1,0,-14;0:-1,0,-13;0:-1,0,-12;0:-1,0,-11;0:-1,0,-10;0:-1,0,-9;0:-1,0,-8;0:-1,0,-7;0:-1,0,-6;0:-1,0,-5;0:-1,0,-4;0:-1,0,-3;0:-1,0,-2;0:-1,0,-1;")